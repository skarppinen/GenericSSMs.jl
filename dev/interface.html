<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Defining SSMs using GenericSSMs.jl · GenericSSMs.jl</title><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="index.html"><img src="assets/logo.svg" alt="GenericSSMs.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">GenericSSMs.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Introduction</a></li><li><a class="tocitem" href="quick-start.html">Installation &amp; quick start</a></li><li><a class="tocitem" href="ssms.html">State-space models and Feynman-Kac representations</a></li><li class="is-active"><a class="tocitem" href="interface.html">Defining SSMs using GenericSSMs.jl</a><ul class="internal"><li><a class="tocitem" href="#Overview"><span>Overview</span></a></li><li><a class="tocitem" href="#Model-struct-and-the-abstract-type-GenericSSM"><span>Model struct and the abstract type <code>GenericSSM</code></span></a></li><li><a class="tocitem" href="#Methods-implementable-for-GenericSSMs"><span>Methods implementable for GenericSSMs</span></a></li><li><a class="tocitem" href="#Method-definitions-required-by-use-case"><span>Method definitions required by use case</span></a></li><li><a class="tocitem" href="#Unicode-method-aliases"><span>Unicode method aliases</span></a></li></ul></li><li><a class="tocitem" href="use-cases.html">Using GenericSSMs.jl</a></li><li><a class="tocitem" href="examples.html">Examples</a></li><li><a class="tocitem" href="resampling-api.html">Resampling API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href="interface.html">Defining SSMs using GenericSSMs.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="interface.html">Defining SSMs using GenericSSMs.jl</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/skarppinen/GenericSSMs.jl/blob/main/docs/src/interface.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Defining-SSMs-using-GenericSSMs.jl"><a class="docs-heading-anchor" href="#Defining-SSMs-using-GenericSSMs.jl">Defining SSMs using GenericSSMs.jl</a><a id="Defining-SSMs-using-GenericSSMs.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Defining-SSMs-using-GenericSSMs.jl" title="Permalink"></a></h1><p>For a quick reference to the information provided here, type <code>?GenericSSM</code> in the Julia REPL after loading GenericSSMs.jl.</p><h2 id="Overview"><a class="docs-heading-anchor" href="#Overview">Overview</a><a id="Overview-1"></a><a class="docs-heading-anchor-permalink" href="#Overview" title="Permalink"></a></h2><p>To use GenericSSMs.jl for the inference of an SSM, the user should define:</p><ol><li><strong>A model struct representing the SSM.</strong></li><li><strong>Methods that implement the SSM.</strong></li></ol><p>Steps 1 and 2 above are described below.</p><h2 id="Model-struct-and-the-abstract-type-GenericSSM"><a class="docs-heading-anchor" href="#Model-struct-and-the-abstract-type-GenericSSM">Model struct and the abstract type <code>GenericSSM</code></a><a id="Model-struct-and-the-abstract-type-GenericSSM-1"></a><a class="docs-heading-anchor-permalink" href="#Model-struct-and-the-abstract-type-GenericSSM" title="Permalink"></a></h2><p>The model struct is a normal Julia <code>struct</code> that represents a user-defined SSM.  The purpose of the model struct is to act as: </p><ol><li>a type for code selection using <a href="https://docs.julialang.org/en/v1/manual/methods/">multiple dispatch</a>, </li><li>a container for data and parameters related to the SSM.</li></ol><p>All model structs need to be defined as a subtype of <code>GenericSSM</code>, which is an abstract type exported by GenericSSMs.jl. Otherwise, the user is free to define the model struct as they see fit for their problem.</p><p>As an example, to define an SSM named <code>Model</code> that has floating point observations, the following model struct could be used:</p><pre><code class="nohighlight hljs">struct Model &lt;: GenericSSM
   y::Vector{Float64}
   # .. arbitrary fields such as other data and parameters related to the SSM ..
end</code></pre><p>Here, the fieldname <code>y</code> is an arbitrary choice.  Naturally, it is also possible to use type parameters in the definition of the model struct.</p><p>There are two <em>optional</em> methods that the user may wish to overload for their model struct:</p><article class="docstring"><header><a class="docstring-binding" id="GenericSSMs.particle_type" href="#GenericSSMs.particle_type"><code>GenericSSMs.particle_type</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>particle_type(model::GenericSSM)</code></p><p>Return the particle type associated with the model <code>model</code>. There exists a fallback for this function, which calls <code>M1</code> and checks the type of the output.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="GenericSSMs.observation_type" href="#GenericSSMs.observation_type"><code>GenericSSMs.observation_type</code></a> — <span class="docstring-category">Function</span></header><section><div><p><code>observation_type(model::GenericSSM)</code></p><p>Return the observation type associated with the model <code>model</code>. There exists a fallback for this function, which calls <code>gk</code> and checks the type of the output.</p></div></section></article><p>As discussed above, both of these functions have fallbacks that work once the user defines  some of the methods discussed in the next section.</p><p>The section <a href="examples.html">Examples</a> contains examples of model struct definitions for more concrete SSMs.</p><h2 id="Methods-implementable-for-GenericSSMs"><a class="docs-heading-anchor" href="#Methods-implementable-for-GenericSSMs">Methods implementable for GenericSSMs</a><a id="Methods-implementable-for-GenericSSMs-1"></a><a class="docs-heading-anchor-permalink" href="#Methods-implementable-for-GenericSSMs" title="Permalink"></a></h2><p>After the model struct has been defined, the user should implement (at minimum a subset of, see <a href="interface.html#Method-definitions-required-by-use-case">Method definitions required by use case</a>) methods that define </p><ul><li>the components <span>$(M_{1:n}, G_{1:n})$</span> of the <a href="ssms.html#Feynman-Kac-representation-of-a-state-space-model">Feynman-Kac model</a> of interest</li><li>the components <span>$(m_{1:n}, g_{1:n})$</span> of the <a href="ssms.html#State-space-models">underlying SSM</a>.</li></ul><p>The interface below gives the method signatures for all implementable methods in GenericSSMs.jl, with</p><ul><li><code>Model &lt;: GenericSSM</code> standing for the type of a user-defined model struct,</li><li><code>P</code> standing for any (particle) type,</li><li><code>F</code> standing for a floating point type, i.e <code>F &lt;: AbstractFloat</code>,</li><li><code>Y</code> standing for any (observation) type, </li><li>the <code>rng</code> argument reserved for a generic random number generator.</li></ul><div class="admonition is-category-interface"><header class="admonition-header">All implementable methods in the GenericSSMs.jl interface for Model &lt;: GenericSSM</header><div class="admonition-body"><ol><li><code>M1(model::Model, rng)::P</code> should return a simulated draw from <span>$M_1(\cdot)$</span>.</li><li><code>logG1(model::Model, x::P)::F</code> should return <span>$\log(G_1(x)) \in \mathbb{R}$</span>.</li><li><code>Mk(model::Model, x::P, k::Integer, rng)::P</code> should return a simulated draw from <span>$M_k(\cdot \mid x), k \geq 2$</span>. </li><li><code>logGk(model::Model, x::P, y::P, k::Integer)::F</code> should return <span>$\log(G_k(x, y)) \in \mathbb{R}, k \geq 2$</span>.</li><li><code>logM1(model::Model, x::P)::F</code> should return <span>$\log(M_1(x)) \in \mathbb{R}$</span>.</li><li><code>logMk(model::Model, y::P, x::P, k::Integer)::F</code> should return <span>$\log(M_k(y \mid x)) \in \mathbb{R}, k \geq 2$</span>.</li><li><code>m1(model::Model, rng)::P</code> should return a simulated draw from <span>$m_1(\cdot)$</span>.</li><li><code>mk(model::Model, x::P, k::Integer, rng)::P</code> should return a simulated draw from <span>$m_k(\cdot \mid x), k \geq 2$</span>.</li><li><code>gk(model::Model, x::P, k::Integer, rng)::Y</code> should return a simulated draw from <span>$g_k(\cdot \mid x), k \geq 1$</span>.</li></ol></div></div><div class="admonition is-info"><header class="admonition-header">In the above interface:</header><div class="admonition-body"><ol><li>The first argument in each method signature is used to distinguish the methods of separate SSMs. </li><li><code>Mk</code>, <code>logGk</code>, <code>logMk</code> and <code>mk</code> should be defined for <span>$k \geq 2$</span>. The cases <span>$k = 1$</span> should be implemented by the separate functions <code>M1</code>, <code>logG1</code>, <code>logM1</code> and <code>m1</code>. This is necessary since the <a href="ssms.html">mathematical function signatures</a> for the cases <span>$k \geq 2$</span> and <span>$k = 1$</span> differ. </li><li>The order of the arguments <code>x</code> and <code>y</code> in the signatures of <code>logGk</code> and <code>logMk</code> are reversed, again for consistency with the mathematical notation.</li><li>The methods are <em>not</em> exported by GenericSSMs.jl. When defining them, their names should be qualified by <code>GenericSSMs</code>.</li></ol></div></div><p>See the <a href="examples.html">Examples</a> section for examples of defining the above methods for concrete SSMs.</p><h2 id="Method-definitions-required-by-use-case"><a class="docs-heading-anchor" href="#Method-definitions-required-by-use-case">Method definitions required by use case</a><a id="Method-definitions-required-by-use-case-1"></a><a class="docs-heading-anchor-permalink" href="#Method-definitions-required-by-use-case" title="Permalink"></a></h2><p>The user need not define all methods in the interface of GenericSSMs.jl, but may instead define the part of the interface that is needed for their use case.  The following table displays the required functions for each use case of GenericSSMs.jl. </p><table><tr><th style="text-align: left">Use case</th><th style="text-align: center">M1</th><th style="text-align: center">logG1</th><th style="text-align: center">Mk</th><th style="text-align: center">logGk</th><th style="text-align: center">logM1</th><th style="text-align: center">logMk</th><th style="text-align: center">m1</th><th style="text-align: center">mk</th><th style="text-align: center">gk</th></tr><tr><td style="text-align: left">Particle filtering</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr><tr><td style="text-align: left">CPF (with ancestor tracing)</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr><tr><td style="text-align: left">CPF (with backward sampling)</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td></tr><tr><td style="text-align: left">Prediction at state level</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td></tr><tr><td style="text-align: left">Prediction at observation level</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td></tr><tr><td style="text-align: left">Simulation at state level</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td></tr><tr><td style="text-align: left">Simulation at observation level</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td></tr></table><p>Note that <code>logM1</code> is currently not required for any use case, but is included in GenericSSMs.jl since it is required by some particle filtering algorithms (such as the particle Gibbs algorithm). </p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>A <code>MethodError</code> will be thrown if a particular method needed by a use case is not defined when the respective algorithm is invoked.</p></div></div><h2 id="Unicode-method-aliases"><a class="docs-heading-anchor" href="#Unicode-method-aliases">Unicode method aliases</a><a id="Unicode-method-aliases-1"></a><a class="docs-heading-anchor-permalink" href="#Unicode-method-aliases" title="Permalink"></a></h2><p>GenericSSMs.jl also supports more aesthetically pleasing aliases that can be used instead of the above method names.  The following table lists them: </p><table><tr><th style="text-align: left">Function</th><th style="text-align: left">Alias</th></tr><tr><td style="text-align: left">M1</td><td style="text-align: left">M₁</td></tr><tr><td style="text-align: left">Mk</td><td style="text-align: left">Mₖ</td></tr><tr><td style="text-align: left">logG1</td><td style="text-align: left">logG₁</td></tr><tr><td style="text-align: left">logGk</td><td style="text-align: left">logGₖ</td></tr><tr><td style="text-align: left">logM1</td><td style="text-align: left">logM₁</td></tr><tr><td style="text-align: left">logMk</td><td style="text-align: left">logMₖ</td></tr><tr><td style="text-align: left">m1</td><td style="text-align: left">m₁</td></tr><tr><td style="text-align: left">mk</td><td style="text-align: left">mₖ</td></tr><tr><td style="text-align: left">gk</td><td style="text-align: left">gₖ</td></tr></table><p>Type <code>\_1[Tab]</code> and <code>\_k[Tab]</code> (where [Tab] is a Tab press) in the Julia REPL to write <code>₁</code> and <code>ₖ</code>, respectively.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="ssms.html">« State-space models and Feynman-Kac representations</a><a class="docs-footer-nextpage" href="use-cases.html">Using GenericSSMs.jl »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 19 December 2022 16:16">Monday 19 December 2022</span>. Using Julia version 1.8.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
